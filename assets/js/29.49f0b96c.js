(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{476:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mmdetection安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mmdetection安装"}},[s._v("#")]),s._v(" MMDetection安装")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("以下所有配置均在"),a("code",[s._v("Ubuntu-20.04")]),s._v("系统下进行。")])]),s._v(" "),a("h2",{attrs:{id:"安装anaconda"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装anaconda"}},[s._v("#")]),s._v(" 安装Anaconda")]),s._v(" "),a("p",[s._v("从清华镜像源下载安装包："),a("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.05-Linux-x86_64.sh",target:"_blank",rel:"noopener noreferrer"}},[s._v("Anaconda3-2021.05-Linux-x86_64.sh"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("终端执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" Anaconda3-2021.05-Linux-x86_64.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("一直按"),a("code",[s._v("Enter")]),s._v("直至要求输入"),a("code",[s._v("yes or no")]),s._v("。")]),s._v(" "),a("p",[s._v("凡是要求输入"),a("code",[s._v("yes or no")]),s._v("，全部输入"),a("code",[s._v("yes")]),s._v("。")]),s._v(" "),a("p",[s._v("重启终端，若用户名前面出现"),a("code",[s._v("base")]),s._v("，即代表安装成功。")]),s._v(" "),a("h2",{attrs:{id:"配置环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境"}},[s._v("#")]),s._v(" 配置环境")]),s._v(" "),a("h3",{attrs:{id:"创建conda环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建conda环境"}},[s._v("#")]),s._v(" 创建conda环境")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("conda create -n open-mmlab "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("python")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.7")]),s._v(" -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"切换conda环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换conda环境"}},[s._v("#")]),s._v(" 切换conda环境")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("conda activate open-mmlab\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"安装pytorch和torchvision"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装pytorch和torchvision"}},[s._v("#")]),s._v(" 安装Pytorch和torchvision")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),s._v(".1+cu111 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchvision")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.10")]),s._v(".1+cu111 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchaudio")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v(".1 -f https://download.pytorch.org/whl/torch_stable.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("我使用"),a("code",[s._v("conda")]),s._v("安装会出现下载进度一直不动的情况，因此这里我使用了"),a("code",[s._v("pip")]),s._v("进行安装。")])]),s._v(" "),a("h3",{attrs:{id:"安装mmdetection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mmdetection"}},[s._v("#")]),s._v(" 安装MMDetection")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openmim\nmim "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mmdet\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("mim 能够自动地安装 OpenMMLab 的项目以及对应的依赖包。")]),s._v(" "),a("p",[s._v("当然，也可以手动安装，详情见官方文档："),a("a",{attrs:{href:"https://mmdetection.readthedocs.io/zh_CN/latest/get_started.html#mmdetection",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装MMDetection"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"验证安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[s._v("#")]),s._v(" 验证安装")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mmdet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apis "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" init_detector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" inference_detector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" show_result_pyplot\n\nconfig_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'configs/cascade_rcnn/cascade_mask_rcnn_x101_64x4d_fpn_20e_coco.py'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从 model zoo 下载 checkpoint 并放在 `checkpoints/` 文件下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网址为: http://download.openmmlab.com/mmdetection/v2.0/faster_rcnn/faster_rcnn_r50_fpn_1x_coco/faster_rcnn_r50_fpn_1x_coco_20200130-047c8118.pth")]),s._v("\ncheckpoint_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'checkpoints/cascade_mask_rcnn_x101_64x4d_fpn_20e_coco_20200512_161033-bdb5126a.pth'")]),s._v("\ndevice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cuda:0'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化检测器")]),s._v("\nmodel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" init_detector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" checkpoint_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推理演示图像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# inference_detector(model, 'demo/demo.jpg')")]),s._v("\n\nshow_result_pyplot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'demo/test2.jpg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" inference_detector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'demo/test2.jpg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("若正常运行，则代表安装成功。")])])}),[],!1,null,null,null);t.default=n.exports}}]);